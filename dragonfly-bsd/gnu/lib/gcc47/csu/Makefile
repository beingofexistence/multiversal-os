.include "../Makefile.inc"
.PATH: ${GCCDIR}/libgcc

.if ${CCVER:Mgcc*}
CFLAGS+=	-finhibit-size-directive
CFLAGS+=	-fno-toplevel-reorder
.endif

CFLAGS+=	-fno-inline-functions
CFLAGS+=	-fno-exceptions
CFLAGS+=	-fno-zero-initialized-in-bss
CFLAGS+=	-fno-tree-vectorize
CFLAGS+=	-fno-omit-frame-pointer
CFLAGS+=	-fno-asynchronous-unwind-tables
CFLAGS+=	-I.
CFLAGS+=	-DIN_GCC

libgcc_tm.h:
	echo "#ifndef LIBGCC_TM_H" > ${.TARGET}
	echo "#define LIBGCC_TM_H" >> ${.TARGET}
	echo "#endif /* LIBGCC_TM_H */" >> ${.TARGET}

CLEANFILES+=	libgcc_tm.h

# note: auto-host.h generated by Makefile.csu is not used.  The cc_prep
# autohost-h is loaded preferentially instead.

beforedepend: libgcc_tm.h

.include "../../csu/Makefile.csu"
