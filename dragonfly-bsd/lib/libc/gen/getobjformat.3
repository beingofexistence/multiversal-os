.\" Copyright (c) 1998 John D. Polstra
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\" $FreeBSD: src/lib/libc/gen/getobjformat.3,v 1.3.2.6 2003/03/13 18:05:37 trhodes Exp $
.\" $DragonFly: src/lib/libc/gen/getobjformat.3,v 1.2 2003/06/17 04:26:42 dillon Exp $
.\"
.Dd May 23, 2009
.Dt GETOBJFORMAT 3
.Os
.Sh NAME
.Nm getobjformat
.Nd get preferred object file format
.Sh LIBRARY
.Lb libc
.Sh SYNOPSIS
.In objformat.h
.Ft int
.Fn getobjformat "char *buf" "size_t bufsize" "int *argcp __unused" "char **argv __unused"
.Sh DESCRIPTION
The
.Fn getobjformat
function copies the name of the preferred object file format
.Dq ( elf )
into a buffer provided by the caller.
The function is currently provided only for backward compatibility.
.Pp
.Va buf
points to a user-supplied buffer into which the name of the object
file format is copied.
.Va bufsize
gives the size of the buffer in bytes.
The string placed in
.Va buf
is always null-terminated.
It is an error if the buffer is too small to hold the null-terminated name.
.Pp
.Va argv
and
.Va argcp
are unused and new applications should set them to
.Dv NULL .
.Sh RETURN VALUES
On success,
.Fn getobjformat
returns the length of the object file format name, not counting the
null terminator.
If the supplied buffer is too small to hold the object file format
and its null terminator,
.Fn getobjformat
returns -1.
In that case, the contents of the buffer and argument
vector supplied by the caller are indeterminate.
.Sh SEE ALSO
.Xr objformat 1
.Sh HISTORY
The
.Fn getobjformat
function first appeared in
.Fx 3.0 .
